/* You can add global styles to this file, and also import other style files */
/* Deliberately avoid importing Readium CSS globally to prevent leaking styles into the ebook content.
  Readium will manage its own styles inside the navigator iframe. */

/* Angular Material theme */
/* Use a valid prebuilt theme from Angular Material */
@import '@angular/material/prebuilt-themes/indigo-pink.css';

/* Google Fonts imported in index.html */

/* Global styles with IoT Sharp Dark theme */
html, body { 
  height: 100%; 
  margin: 0; 
  /* Match ngx-admin demo font */
  font-family: 'Open Sans', 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Liberation Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  background: var(--app-bg);
  color: var(--content-fg);
}

/* Links with good contrast on dark */
a, a:visited { color: #73eaff; text-decoration: none; }
a:hover, a:focus { color: #b5f3ff; text-decoration: underline; }

/* Prefer readable default focus outlines and add a utility for custom rings */
:where(button, [role="button"], a, input, select, textarea) {
  outline-color: #9ddfff;
  outline-offset: 2px;
}
.focus-ring:focus-visible { outline: none !important; box-shadow: var(--focus-ring); border-radius: 0; }
.focus-ring-strong:focus-visible { outline: none !important; box-shadow: var(--ring-strong); border-radius: 0; }

/* Motion safety */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after { transition: none !important; animation: none !important; }
}

/* ======================================
   GLOBAL SHARP CORNERS OVERRIDE
   Force border-radius: 0 on ALL elements
   to achieve the IoT sharp design
====================================== */
* {
  border-radius: 0 !important;
}
/* Exception: keep dots circular for badges */
.badge .dot {
  border-radius: 50% !important;
}

/* IoT Sharp Dark Theme - Global variables */
:root {
  /* Deep navy palette for dark, contrasty IoT dashboard */
  --app-bg: #151a30;            /* deep navy background */
  --panel-bg: #192038;          /* card panels */
  --panel-bg-soft: #0f1422;     /* soft surfaces */
  --border-color: rgba(255, 255, 255, 0.06);
  --content-fg: #e6e9f0;        /* high-contrast foreground */
  --muted-fg: #8f9bb3;          /* subdued text */
  
  /* Accent gradients: cyan â†’ blue */
  --accent-grad-start: #00d2ff;
  --accent-grad-end: #3a7bd5;
  
  /* IoT-specific accents */
  --iot-accent: #4fc3f7;
  --iot-ok: #2e7d32;
  --iot-ko: #c62828;
  
  /* Shadows and focus rings */
  --card-shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
  --focus-ring: 0 0 0 3px rgba(0, 210, 255, 0.45);
  --ring-strong: 0 0 0 3px rgba(58, 123, 213, 0.55);
  
  /* Select validation icon space */
  --select-validation-icon-space: 36px;
  
  /* Spacing & type scale (IoT-tuned) */
  --space-1: 8px;
  --space-2: 10px;
  --space-3: 14px;
  --space-4: 20px;
  --space-5: 22px;
  --space-6: 32px;
  --font-size-sm: 0.875rem;
  --font-size-md: 1rem;
  --font-size-lg: 1.2rem;
  --font-size-xl: 1.6rem;
}

/* Utility classes */
.flex-spacer {
  flex: 1 1 auto;
}

.text-center {
  text-align: center;
}

.mt-1 { margin-top: var(--space-2); }
.mt-2 { margin-top: var(--space-3); }
.mt-3 { margin-top: var(--space-5); }
.mb-1 { margin-bottom: var(--space-2); }
.mb-2 { margin-bottom: var(--space-3); }
.mb-3 { margin-bottom: var(--space-5); }
.ml-1 { margin-left: var(--space-2); }
.mr-1 { margin-right: var(--space-2); }

.p-1 { padding: var(--space-2); }
.p-2 { padding: var(--space-3); }
.p-3 { padding: var(--space-5); }

/* Loading spinner overlay */
.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(255, 255, 255, 0.8);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

/* (Removed older book-card/book-grid rules; see consolidated rules later) */

/* Unified app background and content defaults */
body, .motspassants-container { background: var(--app-bg); color: var(--content-fg); }
.motspassants-library { min-height: 100vh; background: transparent; color: var(--content-fg); padding: 0; }

/* Global overrides for the EPUB reader stage and Readium navigator.
   These live here (global) so they apply to iframes/elements created
   dynamically by the navigator, which won't have Angular's scoped
   attributes and thus would not match component-level CSS. */
.reader-stage {
  position: relative;
  width: 100%;
  height: 100%;
  z-index: 0;
  overflow: hidden;
  isolation: isolate;
  transform: translateZ(0);
}

/* Ensure any navigator/fallback child fills its stage */
.reader-stage > *,
.reader-stage > .reader-frame,
.reader-stage > iframe,
.reader-stage .navigator-root,
.reader-stage .navigator-root > iframe,
.reader-stage [data-readium-view],
.reader-stage [data-readium-view] > iframe,
.readium-navigator-iframe {
  position: absolute !important;
  inset: 0 !important;
  width: 100% !important;
  height: 100% !important;
  border: 0 !important;
  display: block !important;
  max-width: 100% !important;
  max-height: 100% !important;
}

/* Top section (header) shared styles */
.motspassants-library .library-header { background: transparent; padding: 24px 20px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 0; }
.motspassants-library .header-content { flex: 1; }
.motspassants-library .library-title { font-size: 20px; font-weight: 600; margin: 0; color: var(--content-fg); display: flex; align-items: center; gap: 12px; letter-spacing: -0.5px; }
.motspassants-library .title-icon { font-size: 32px; width: 32px; height: 32px; color: #e5a00d; margin-right: 12px; }
.motspassants-library .library-subtitle { font-size: 0.95rem; margin: 4px 0 0 0; opacity: 0.9; color: var(--muted-fg); }

/* Section titles in content area */
.motspassants-library .section-title { display: flex; align-items: center; gap: 8px; font-size: 1.25rem; font-weight: 600; margin: 0 0 16px 0; color: var(--accent-grad-start); }
.motspassants-library .section-title iconify-icon { margin-right: 8px; font-size: 20px; width: 20px; height: 20px; }

/* Back button (sticky) used on detail pages */
.motspassants-library .back-button { padding: 24px 20px; position: sticky; top: 0; background: transparent; backdrop-filter: none; z-index: 10; border-bottom: none; }
.motspassants-library .back-button button { color: var(--content-fg) !important; font-weight: 500 !important; }
.motspassants-library .back-button iconify-icon { margin-right: 8px; font-size: 20px; width: 20px; height: 20px; }

/* Primary CTA/FAB unified gradient */
.cta-button,
.fab-search,
.btn-primary { background: linear-gradient(135deg, var(--accent-grad-start) 0%, var(--accent-grad-end) 100%) !important; color: #ffffff !important; box-shadow: 0 8px 32px rgba(79, 195, 247, 0.3) !important; transition: all 0.3s ease !important; }
.cta-button:hover,
.fab-search:hover,
.btn-primary:hover { transform: translateY(-2px) !important; box-shadow: 0 12px 40px rgba(79, 195, 247, 0.4) !important; }

/* Ensure mat-select overlay panel matches the closed control's panel background (SHARP) */
/* Global rule because the panel is attached to the overlay container outside component scope */
.mat-mdc-select-panel {
  /* Cleaner panel: match app background, subtle frame, minimal shadow, SHARP */
  background: var(--app-bg) !important;
  color: #ffffff !important;
  border: 1px solid rgba(255,255,255,0.06) !important;
  border-radius: 0 !important; /* SHARP */
  box-shadow: 0 4px 12px rgba(0,0,0,0.45) !important;
  padding: 4px 0 !important;
}

/* Make all option text white and readable */
.mat-mdc-select-panel .mat-mdc-list .mat-mdc-list-item {
  color: #ffffff !important;
  background: transparent !important; /* keep inner area clean */
  padding: 6px 12px !important;
  position: relative;
  font-size: 0.95rem;
  display: flex;
  align-items: center;
  gap: 8px;
  padding-left: 12px; /* compact left padding */
}

/* Shared sort/select styles moved from book-list component to global so they
   apply across pages (books, series, etc). These keep the trigger visually
   inline, force white text in overlays, reserve validation icon space and make
   the overlay intrinsic to the largest option. */

/* Inline trigger container used in headers */
.motspassants-library .header-content .sort-field { display:inline-flex; align-items:center; margin-left:8px; }

/* Grouped overrides for the sort/select trigger (closed and open) to keep the
   control visually inline and transparent. */
.motspassants-library .header-content .sort-field > mat-select,
.motspassants-library .header-content .sort-field .mat-select-trigger,
.motspassants-library .header-content .sort-field .mat-select-value,
.motspassants-library .header-content .sort-field .mat-mdc-select-value,
.motspassants-library .header-content .sort-field .mat-select-value-text,
.motspassants-library .header-content .sort-field .mat-mdc-select-value-text {
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  margin: 0 !important;
  color: var(--muted-fg) !important;
  font-size: 0.95rem !important;
  line-height: 1 !important;
  height: auto !important;
}

/* Use the same arrow/graphic for closed and open triggers and force consistent
   positioning + color. Also ensure inline SVG arrows inherit currentColor. */
.motspassants-library .header-content .sort-field .mat-select-arrow,
.motspassants-library .header-content .sort-field .mat-mdc-select-arrow,
.motspassants-library .header-content .sort-field .mat-select.mat-select-open .mat-select-arrow,
.motspassants-library .header-content .sort-field .mat-mdc-select.mat-mdc-select-open .mat-mdc-select-arrow,
.motspassants-library .header-content .sort-field .mat-select-trigger.mat-select-open .mat-select-arrow,
.motspassants-library .header-content .sort-field .mat-mdc-select-trigger.mat-mdc-select-open .mat-mdc-select-arrow {
  color: var(--muted-fg) !important;
  font-size: 12px !important;
  left: 8px !important;
  right: auto !important;
  opacity: 0.9 !important;
  transform: none !important;
}
.motspassants-library .header-content .sort-field .mat-select-arrow svg,
.motspassants-library .header-content .sort-field .mat-mdc-select-arrow svg { fill: currentColor !important; }

/* Ensure option primary text and list items are white inside the overlay. Also
   include overlay pane selectors since the panel is attached to the overlay. */
.motspassants-library .header-content .sort-field .mat-mdc-select-panel .mdc-list-item__primary-text,
.motspassants-library .header-content .sort-field .mat-select-panel .mdc-list-item__primary-text,
.mat-mdc-select-panel .mdc-list-item__primary-text,
.mat-select-panel .mdc-list-item__primary-text,
.mat-mdc-select-panel .mat-mdc-list .mat-mdc-list-item,
.mat-select-panel .mat-mdc-list .mat-mdc-list-item {
  color: #fff !important;
  opacity: 1 !important;
}

/* Reserve right padding in the panel so intrinsic panel width accounts for the
   validation/check icon. Use content-box so padding doesn't shrink the measured
   content area. */
.motspassants-library .header-content .sort-field .mat-mdc-select-panel,
.motspassants-library .header-content .sort-field .mat-select-panel,
.cdk-overlay-pane .mat-mdc-select-panel,
.cdk-overlay-pane .mat-select-panel {
  padding-right: var(--select-validation-icon-space) !important;
  box-sizing: content-box !important;
}

/* Add right padding to list items so their measured width includes icon space. */
.mat-mdc-select-panel .mat-mdc-list .mat-mdc-list-item,
.mat-select-panel .mat-mdc-list .mat-mdc-list-item {
  padding-right: var(--select-validation-icon-space) !important;
}

/* Make sure the trigger shows the text without being overlapped by the icon. */
.motspassants-library .header-content .sort-field .mat-select-trigger,
.motspassants-library .header-content .sort-field .mat-mdc-select-trigger {
  padding-right: calc(var(--select-validation-icon-space) + 8px) !important;
}

/* Size the select panel to the intrinsic width of its content so the panel
   is always wide enough to show the largest word without wrapping. */
.motspassants-library .header-content .sort-field .mat-mdc-select-panel,
.motspassants-library .header-content .sort-field .mat-select-panel,
.cdk-overlay-pane .mat-mdc-select-panel,
.cdk-overlay-pane .mat-select-panel {
  width: auto !important;
  display: inline-block !important;
  min-width: -webkit-min-content !important;
  min-width: -moz-min-content !important;
  min-width: min-content !important;
  min-width: max-content !important;
}

/* Prevent wrapping in option text so the panel width grows to the longest word. */
.motspassants-library .header-content .sort-field .mat-mdc-select-panel .mdc-list-item__primary-text,
.motspassants-library .header-content .sort-field .mat-select-panel .mdc-list-item__primary-text,
.motspassants-library .header-content .sort-field .mat-mdc-select-panel .mat-mdc-list .mat-mdc-list-item,
.motspassants-library .header-content .sort-field .mat-select-panel .mat-mdc-list .mat-mdc-list-item {
  white-space: nowrap !important;
}

/* Trigger text when the menu is open should also be white. */
.motspassants-library .header-content .sort-field .mat-select.mat-select-open .mat-select-value-text,
.motspassants-library .header-content .sort-field .mat-select-trigger.mat-select-open .mat-select-value-text,
.motspassants-library .header-content .sort-field .mat-mdc-select.mat-mdc-select-open .mat-mdc-select-value-text,
.motspassants-library .header-content .sort-field .mat-mdc-select-trigger.mat-mdc-select-open .mat-mdc-select-value-text {
  color: #fff !important;
}

/* Remove form-field outlines inside header triggers for a clean inline look. */
.motspassants-library .header-content .sort-field .mat-form-field-infix,
.motspassants-library .header-content .sort-field .mat-form-field-wrapper,
.motspassants-library .header-content .sort-field .mat-form-field-outline {
  display: none !important;
  padding: 0 !important;
  margin: 0 !important;
}

/* Keep option list readable when open (font-size shared) */
.mat-mdc-select-panel .mat-mdc-list .mat-mdc-list-item { font-size:0.95rem; }

/* Avoid forcing white on every child; keep readable defaults and allow component-level muted tones */
.mat-mdc-select-panel {
  color: #ffffff !important; /* default panel text color */
}
.mat-mdc-select-panel .mat-mdc-list .mat-mdc-list-item {
  color: #ffffff !important;
}
/* Allow component CSS to set muted tones for specific items like 'recently-updated' */

/* Style the selected option to mirror the left menu selection: white left bar + white text */

/* Selected option: show a subtle checkmark on the right (GitHub-like) */

/* Selected option: left checkmark, bold white text */
.mat-mdc-select-panel .mat-mdc-list .mat-mdc-list-item.mat-mdc-list-item--selected,
.mat-mdc-select-panel .mat-mdc-list .mat-mdc-list-item[aria-selected="true"] {
  color: #ffffff !important;
  font-weight: 600 !important;
}

/* Show a subtle checkmark on the right for selected items */
.mat-mdc-select-panel .mat-mdc-list .mat-mdc-list-item.mat-mdc-list-item--selected::after,
.mat-mdc-select-panel .mat-mdc-list .mat-mdc-list-item[aria-selected="true"]::after {
  content: '\2713';
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--content-fg) !important;
  font-size: 0.95rem;
}

/* Hover state similar to GitHub: gentle lightening */
.mat-mdc-select-panel .mat-mdc-list .mat-mdc-list-item:hover {
  background: rgba(255,255,255,0.03) !important;
}

/* Divider look between groups (simulate GitHub sections) */
.mat-mdc-select-panel .mat-mdc-list .divider {
  height: 1px;
  background: rgba(255,255,255,0.03);
  margin: 6px 0;
}

/* Section titles if used inside the panel */
.mat-mdc-select-panel .mat-mdc-list .section-title {
  padding: 8px 16px;
  color: rgba(255,255,255,0.6);
  font-size: 0.75rem;
  font-weight: 600;
}

/* Reduce panel padding for a tighter, integrated look */
.mat-mdc-select-panel .mat-mdc-list { padding: 4px 0 !important; }

/* Style 'Recently Updated' option/value to match page description muted color */
.mat-mdc-select.recently-updated .mat-mdc-select-value,
.mat-mdc-select.recently-updated .mat-mdc-select-value * {
  color: var(--muted-fg) !important;
}

.mat-mdc-select-panel .mat-mdc-list .mat-mdc-list-item.recently-updated {
  color: var(--muted-fg) !important;
  font-weight: 500 !important;
}

/* Consolidated base styles for book grids and cards used across components (SHARP) */
.books-grid{display:grid;gap:24px;justify-content:center}
.book-card{background:rgba(255,255,255,0.05);border-radius:0;overflow:hidden;transition:box-shadow .2s ease,border-color .2s ease;cursor:pointer;position:relative;border:1px solid rgba(255,255,255,.1)}
.book-card:hover{box-shadow:0 12px 28px rgba(0,0,0,.4);border-color:rgba(115,234,255,.35)}
.book-card:focus-visible{outline:none;box-shadow:var(--focus-ring)}
.book-cover{position:relative;width:100%;height:100%;overflow:hidden}
.cover-image{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}
.cover-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:16px;background:linear-gradient(135deg,#2a2a2a 0%,#1a1a1a 100%);color:#cfcfcf}
.book-title-text{font-size:1rem;line-height:1.2;word-break:break-word}
.book-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .3s ease;z-index:2}
.book-card:hover .book-overlay{opacity:1}
.book-actions{display:flex;gap:16px}
.action-btn{width:80px;height:80px;background:rgba(255,255,255,.2)!important;color:#fff!important;transition:all .3s ease!important}
.book-info{position:absolute;left:0;right:0;bottom:0;padding:8px 10px;text-align:left;background:linear-gradient(180deg,rgba(0,0,0,0) 0%,rgba(0,0,0,.65) 40%,rgba(0,0,0,.85) 100%);z-index:1}
.book-title{font-size:1.1rem;font-weight:600;margin:0 0 4px 0;color:#fff;line-height:1.2;height:2.4em;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;line-clamp:2;-webkit-box-orient:vertical}
.book-author{font-size:.9rem;margin:0 0 2px 0;opacity:.85;color:#b3e5fc}
.book-series{font-size:.85rem;margin:0 0 2px 0;opacity:.75;color:#81d4fa;font-style:italic}
.book-date{font-size:.8rem;margin:0;opacity:.7;color:#4fc3f7}

@media (max-width:768px){
  .books-grid{ grid-template-columns:repeat(auto-fill,240px); justify-content:center; gap:24px; padding:24px }
  .book-actions{ opacity:1; position:static; margin-top:8px; justify-content:center }
  .action-btn{ width:64px; height:64px; min-width:64px }
}
@media (max-width:480px){
  .books-grid{ grid-template-columns:repeat(auto-fill,240px); justify-content:center; gap:16px; padding:16px }
}

/* ---------------------------------------------
   IoT Sharp Dark Theme - NOW GLOBAL
   Previously opt-in via .theme-ngx class, now
   applied globally. All IoT primitives (cards,
   controls, tabs, chips, badges) are above.
---------------------------------------------- */