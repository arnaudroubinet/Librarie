/* Shared top/background styles and base ngx-admin theme live in global styles.css */

.loading-section { display: flex; justify-content: center; align-items: center; min-height: 40vh; text-align: center; }
.loading-content h2 { margin: 24px 0 8px 0; font-weight: 600; }
.loading-content p { margin: 0; opacity: 0.85; }

/* A11y utility: screen-reader-only */
.sr-only:not(:focus):not(:active) {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

/* Warning banner when using cached/stale settings */
.warning-banner {
  display: flex;
  align-items: center;
  gap: 8px;
  background: rgba(255, 209, 102, 0.12);
  color: #ffe6a1;
  border: 1px solid rgba(255, 209, 102, 0.35);
  padding: 10px 12px;
  border-radius: 10px;
  margin: 0 0 16px 0;
}
.warning-banner iconify-icon { color: #ffca28; }

/* Page header refinements to echo ngx-admin top area */
.library-header { display: flex; justify-content: space-between; gap: 12px; }
.library-header .header-actions { display: flex; align-items: center; gap: 8px; }
.library-header .btn-ghost { height: 36px; padding: 0 10px; border-radius: 8px; }

/* Card and header primitives harmonize with global .theme-ngx */
.ngx-card-header { display: flex; align-items: center; gap: 12px; }
.ngx-card-header .title-group { display: flex; flex-direction: column; gap: 2px; }
.ngx-card-subtitle { opacity: .85; }
.ngx-card .avatar { width: 36px; height: 36px; border-radius: 8px; display: inline-flex; align-items: center; justify-content: center; background: linear-gradient(135deg, var(--accent-grad-start) 0%, var(--accent-grad-end) 100%); color: #0c1722; }
.ngx-card .avatar iconify-icon { color: #0c1722; font-size: 20px; }

/* Settings container: slightly wider grid like ngx-admin */
.settings-scope.ngx-container { max-width: 1360px; }

/* IoT-style control tiles (top row) */
.iot-scope { --iot-accent: #4fc3f7; --iot-ok: #2e7d32; --iot-ko: #c62828; }
.iot-controls-grid { display: grid; grid-template-columns: repeat(4, minmax(0, 1fr)); gap: 16px; margin-bottom: 16px; }
.iot-control { display: flex; align-items: center; gap: 12px; background: rgba(79,195,247,0.10); border: 1px solid rgba(79,195,247,0.25); border-radius: 12px; padding: 12px 14px; min-height: 64px; text-align: left; }
.iot-control.iot-action { cursor: pointer; transition: background .2s ease, border-color .2s ease; }
.iot-control.iot-action:hover { background: rgba(79,195,247,0.16); border-color: rgba(79,195,247,0.35); }
.iot-icon { width: 36px; height: 36px; border-radius: 8px; display: inline-flex; align-items: center; justify-content: center; background: linear-gradient(135deg, rgba(79,195,247,0.25) 0%, rgba(29,124,187,0.25) 100%); color: var(--iot-accent); }
.iot-icon iconify-icon { font-size: 20px; }
.iot-meta { display: flex; flex-direction: column; gap: 2px; }
.iot-title { font-size: .85rem; text-transform: uppercase; letter-spacing: .06em; color: #cfe8ff; opacity: .95; }
.iot-state { font-weight: 700; }
.iot-state.on { color: var(--iot-accent); }
.iot-state.off { color: var(--iot-ko); }

/* Tabbed card header actions */
.iot-tab-card .ngx-card-header { gap: 16px; }
.iot-tab-actions { margin-left: auto; display: inline-flex; align-items: center; gap: 6px; background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.08); border-radius: 8px; padding: 4px; }
.iot-tab { appearance: none; border: none; background: transparent; color: #cfe8ff; padding: 6px 10px; border-radius: 6px; cursor: pointer; font-weight: 600; }
.iot-tab[aria-selected="true"] { background: rgba(79,195,247,0.16); color: #fff; }

/* Formats chips (IoT-like pills) */
.chip-list { display: flex; flex-wrap: wrap; gap: 8px; }
.chip { display: inline-flex; align-items: center; height: 28px; padding: 0 10px; border-radius: 16px; background: rgba(255,255,255,0.06); border: 1px solid rgba(255,255,255,0.12); color: #e6f4ff; font-size: .8rem; font-weight: 600; }
.formats-wrap { margin-top: 12px; }
.formats-title { font-size: .85rem; text-transform: uppercase; letter-spacing: .06em; opacity: .9; margin-bottom: 6px; }

/* Quick stats list (right column) */
.iot-quick-card .ngx-card-content { padding-top: 8px; }
.quick-list { list-style: none; padding: 0; margin: 0; display: grid; grid-template-columns: 1fr; gap: 10px; }
.quick-item { display: flex; align-items: center; gap: 12px; background: rgba(255,255,255,0.04); border-radius: 10px; padding: 10px 12px; }
.quick-icon { color: var(--iot-accent); font-size: 20px; }
.quick-meta { display: flex; align-items: baseline; justify-content: space-between; gap: 12px; width: 100%; }
.quick-name { color: #cfcfcf; font-weight: 500; }
.quick-count { color: #fff; font-weight: 700; }

/* Main IoT grids */
.iot-main-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 16px; margin-bottom: 16px; }
.iot-bottom-grid { display: grid; grid-template-columns: 1fr; gap: 16px; }

/* KPI tiles refinements */
.kpi-grid { margin-bottom: 12px; }
.ngx-kpi { align-items: center; }
.kpi-icon-wrap { width: 40px; height: 40px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; background: rgba(115,234,255,0.14); border: 1px solid rgba(115,234,255,0.25); }
.kpi-icon { font-size: 22px; color: #9fdcff; }
.kpi-label { text-transform: uppercase; letter-spacing: .06em; font-size: .75rem; }

.stat-row { display: flex; justify-content: space-between; align-items: center; margin: 12px 0; padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.08); min-height: 24px; }
.stat-row:last-child { border-bottom: none; }
.stat-label { font-weight: 500; color: #cfcfcf; font-size: clamp(0.875rem, 2vw, 0.95rem); }
.stat-value { font-weight: 600; color: #ffffff; font-size: clamp(0.875rem, 2vw, 0.95rem); text-align: right; }

/* formats chips removed in favor of stat tiles */

.stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 16px; }

.stat-item { display: flex; align-items: center; gap: 12px; padding: 16px; background: linear-gradient(135deg, rgba(79, 195, 247, 0.12) 0%, rgba(29, 124, 187, 0.12) 100%); border-radius: 12px; transition: background 0.2s ease; min-height: 60px; }
.stat-item:hover { background: linear-gradient(135deg, rgba(79, 195, 247, 0.18) 0%, rgba(29, 124, 187, 0.18) 100%); }
.stat-icon { color: #4fc3f7; font-size: clamp(20px, 3vw, 24px); flex-shrink: 0; }
.stat-content { display: flex; flex-direction: column; gap: 2px; min-width: 0; }
.stat-count { font-size: clamp(1.25rem, 3vw, 1.5rem); font-weight: bold; color: #4fc3f7; line-height: 1.2; }
.stat-name { font-size: clamp(0.75rem, 2vw, 0.8rem); color: #cfcfcf; text-transform: capitalize; line-height: 1.2; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

/* Health section */
.health-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; }
.health-item { display: flex; align-items: center; justify-content: space-between; background: rgba(255,255,255,0.04); padding: 12px 14px; border-radius: 10px; }
.health-label { color: #cfcfcf; font-weight: 500; }
.status-badge { display: inline-flex; align-items: center; justify-content: center; min-width: 64px; height: 32px; padding: 0 12px; border-radius: 16px; font-weight: 600; font-size: 0.9rem; }
.status-badge.ok { background: #2e7d32; color: #fff; }
.status-badge.ko { background: #c62828; color: #fff; }

/* Readiness checks submodule */
.readiness-list { display: grid; grid-template-columns: 1fr; gap: 12px; margin-top: 12px; }

/* Refresh button in headers */
.ngx-card-header .refresh-btn { margin-left: auto; width: 28px; height: 28px; line-height: 28px; border: none; background: transparent; color: inherit; cursor: pointer; }
.ngx-card-header .refresh-btn iconify-icon { font-size: 18px; opacity: 0.9; }
.ngx-card-header .refresh-btn:focus-visible { outline: 2px solid var(--focus-ring, #6ea8fe); outline-offset: 2px; border-radius: 6px; }
/* Add an additional ghost button (ellipsis) next to refresh */
.ngx-card-header .btn-ghost { margin-left: auto; }
.ngx-card-header .btn-ghost + .refresh-btn { margin-left: 6px; }

/* Formats-specific size reductions */
.format-grid { grid-template-columns: repeat(auto-fit, minmax(90px, 1fr)); gap: 8px; }
.format-item { padding: 6px 8px; min-height: 36px; gap: 6px; border-radius: 10px; }
.format-icon { font-size: 14px; }
.format-text { font-size: clamp(0.75rem, 2.2vw, 0.9rem); font-weight: 600; line-height: 1.1; }
.format-item .stat-content { gap: 0; }

/* Tablet breakpoint: tighten grids and stack main earlier */
@media (max-width: 1024px) {
  .iot-controls-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; }
  .iot-main-grid { grid-template-columns: 1fr; gap: 12px; }
  .iot-tab-actions { flex-wrap: wrap; row-gap: 6px; }
}

/* Small phones: single column controls and compact paddings */
@media (max-width: 520px) {
  .iot-controls-grid { grid-template-columns: 1fr; }
  .iot-control { padding: 10px 12px; min-height: 56px; }
  .iot-icon { width: 30px; height: 30px; }
  .chip { height: 26px; padding: 0 8px; font-size: .75rem; }
}

/* Modern phones (≤428px: iPhone 12-15/Pro/Plus, many Samsung S/A) */
@media (max-width: 428px) {
  .ngx-card-content { padding: 12px; }
  .iot-controls-grid { gap: 10px; }
  .iot-main-grid { gap: 12px; }
  .quick-item { padding: 8px 10px; }
  .stat-row { padding: 10px 0; margin: 8px 0; }
  .formats-wrap { margin-top: 8px; }
  .iot-tab { padding: 8px 12px; min-height: 44px; } /* 44px tap target */
  .ngx-card-header .refresh-btn { width: 44px; height: 44px; } /* 44px tap target */
}

/* Smaller phones (≤390px: iPhone 12/13/14/15 non-Pro) */
@media (max-width: 390px) {
  .iot-title { font-size: .8rem; }
  .iot-state { font-size: .95rem; }
  .chip { height: 24px; padding: 0 6px; font-size: .7rem; }
  .quick-meta { gap: 8px; }
  .quick-name { font-size: .85rem; }
  .quick-count { font-size: 1rem; }
  .ngx-card-header { gap: 10px; }
  .iot-tab-actions { gap: 4px; padding: 2px; }
  .iot-tab { padding: 6px 8px; min-height: 40px; }
}

/* Responsive tweaks for tiles/cards (legacy breakpoint) */
@media (max-width: 767px) {
  .stats-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; }
  .stat-item { padding: 14px; min-height: 56px; }
  .stat-row { flex-direction: column; align-items: flex-start; gap: 4px; padding: 10px 0; }
  .stat-value { text-align: left; font-weight: 700; }
  .iot-controls-grid { grid-template-columns: repeat(2, 1fr); gap: 12px; }
  .iot-main-grid { grid-template-columns: 1fr; gap: 12px; }
}

/* ————————— Sharp corners override ————————— */
/* Force square corners across Settings IoT scope to achieve a "sharp" look */
.settings-scope :is(
  .ngx-card,
  .ngx-card-header .refresh-btn,
  .btn-ghost,
  .avatar,
  .iot-control,
  .iot-icon,
  .iot-tab-actions,
  .iot-tab,
  .chip,
  .quick-item,
  .status-badge,
  .health-item,
  .stat-item,
  .warning-banner,
  .kpi-icon-wrap,
  .format-item
) {
  border-radius: 0 !important;
}

/* Also remove any per-state rounded outline */
.settings-scope .ngx-card-header .refresh-btn:focus-visible { border-radius: 0 !important; }
